---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "remotefs_file Resource - remotefs"
subcategory: ""
description: |-
  The file resource manages a file on a remote filesystem.
  At the moment, only WebDAV is supported as a transport protocol but others will follow eventually.
---

# remotefs_file (Resource)

The file resource manages a file on a remote filesystem.

At the moment, only WebDAV is supported as a transport protocol but others will follow eventually.

## Example Usage

```terraform
# Create a file "/example.txt" containing "toto" as content. All connection information are specified at the provider level.
resource "remotefs_file" "example" {
  path           = "/example.txt"
  inline_content = "toto"
}

# Copy the content the local file "local.txt" to the remote file "example.txt". All connection information are specified at the provider level.
resource "remotefs_file" "example" {
  path         = "/example.txt"
  file_content = "local.txt"
}

# Create a file containing a random identifier
resource "random_pet" "identifier" {
  length = 4
}

resource "remotefs_file" "remote_id" {
  path           = "/my-id"
  inline_content = random_pet.identifier.id
}

# Create a file containing a random secret on two different servers: a shared secret
variable "secret_version" {
  description = "Increment value when the secrets need to be rolled"
  type        = number
  default     = 0
}

variable "private_key_passphrase" {
  description = "Private Key Passphrase"
  type        = string
  sensitive   = true
  ephemeral   = true
}

resource "random_bytes" "salt" {
  length = 16
}

ephemeral "random_password" "shared_secret" {
  length = 16
}

resource "remotefs_file" "shared_secret_srv1" {
  keepers = {
    secret_version = var.secret_version
  }
  path           = "/shared_secret.txt"
  inline_content = ephemeral.random_password.shared_secret.result
  hash_salt      = random_bytes.salt.hex
  webdav = {
    base_url               = "https://dav1.broken-by-design.fr/"
    ca_file_path           = "/etc/ssl/certs/ca-certificates.crt"
    authentication_method  = "cert"
    private_key_file       = "./terraform.key"
    private_key_passphrase = var.private_key_passphrase
    certificate_file       = "./terraform.crt"
  }
}

resource "remotefs_file" "shared_secret_srv2" {
  keepers = {
    secret_version = var.secret_version
  }
  path           = "/shared_secret.txt"
  inline_content = ephemeral.random_password.shared_secret.result
  hash_salt      = random_bytes.salt.hex
  webdav = {
    base_url               = "https://dav2.broken-by-design.fr/"
    ca_file_path           = "/etc/ssl/certs/ca-certificates.crt"
    authentication_method  = "cert"
    private_key_file       = "./terraform.key"
    private_key_passphrase = var.private_key_passphrase
    certificate_file       = "./terraform.crt"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `path` (String) The path to the managed resource.

With WebDAV, this path is concatenated to the base URL specified as part of the connection information.

### Optional

> **NOTE**: [Write-only arguments](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments) are supported in Terraform 1.11 and later.

- `file_content` (String) The absolute path to a local file whose content is used to set the content of the managed file.

When this attribute is specified, the content of the local file is compared with the content of the managed file. If the content differs, the resource is replaced (the managed file is destroyed and recreated with the content of the local file specified with this attribute).

If the content of the local file and the content of the managed file are identical, then the state is just updated to the new value of that attribute and the managed file is left unchanged and untouched.

The content comparison is performed using a hash function. If the file content is sensitive, like a password, please consider specifying the hash_salt property as well so that the hash algorithm used to compare the managed file content and this property value is appropriate and secure (Argon2ID of the SHA-512 of the file, instead of just SHA-512 of the file).
- `group` (Attributes) An object to specify the primary group of the managed resource.

This value is ignored when managing a WebDAV resource.

Only one of the name and gid properties can be set at the same time. (see [below for nested schema](#nestedatt--group))
- `hash_salt` (String) A salt value to use when hashing the file content.

This attribute ought to be set if the content of the managed file is sensitive, like a password.

When this attribute is set, the file content hash is computed using the Argon2ID algorithm to reduce the risk of the sensitive value being recovered by a bruteforce attack on the hash property.
- `inline_content` (String, Sensitive, [Write-only](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments)) The managed file content itself.
	
When this attribute is not null, if the content of the managed file is identical to this attribute value, nothing is done. If the managed resource file content differs from this attribute value, the resource is replaced (the managed file is destroyed and recreated with this attribute value).

Setting this attribute to an empty string does count as a valid value and corresponds to an empty managed file.

This attribute is write-only, which means that the specified content is not stored in state, and ephemeral values can be used to set it. As such, setting this property to a sensitive value like a password can be done securely. If you do specify a password, please consider specifying the hash_salt property as well so that the hash algorithm used to compare the managed file content and this property value is appropriate and secure (Argon2ID of the SHA-512 of the file, instead of just SHA-512 of the file).

This attribute conflicts with the file_content attribute.
- `keepers` (Map of String) Arbitrary map of values that, when changed, will trigger recreation of resource. This is the same thing as hashicorp/random random_id keepers.
- `owner` (Attributes) An object to specify the owner of the managed resource.

This value is ignored when managing a WebDAV resource.

Only one of the name and uid properties can be set at the same time. (see [below for nested schema](#nestedatt--owner))
- `permissions` (String) An octal value representing the UNIX-like permissions to the mananged resource. The format can be 777, 0777 or 0o777.

This value is ignored when managing a WebDAV resource.
- `webdav` (Attributes) webdav specifies the connection information required to access the managed resource.

If this configuration value is not specified, the value defined at the provider level is used instead.

Exactly one connection type must be specified (currently only WebDAV is supported).

If the connection information is provided both at the provider level and at the resource level, the resource level information is preferred and used. (see [below for nested schema](#nestedatt--webdav))

<a id="nestedatt--group"></a>
### Nested Schema for `group`

Optional:

- `gid` (Number) The GID of the primary group of the managed resource.
	
This value is ignored when managing a WebDAV resource.

This value conflicts with the name property of this object.
- `name` (String) The name of the primary group of the managed resource.

This value is ignored when managing a WebDAV resource.

This value conflicts with the gid property of this object.


<a id="nestedatt--owner"></a>
### Nested Schema for `owner`

Optional:

- `name` (String) The username of the owner of the managed resource.

This value is ignored when managing a WebDAV resource.

This value conflicts with the uid property of this object.
- `uid` (Number) The UID of the owner of the managed resource.
	
This value is ignored when managing a WebDAV resource.

This value conflicts with the name property of this object.


<a id="nestedatt--webdav"></a>
### Nested Schema for `webdav`

Required:

- `base_url` (String) The URL of the root directory exposed over WebDAV.

The URL use the HTTP or the HTTPS scheme. If the HTTPS scheme is used, either the ca_file or the ca_file_path attributes must be specifie.

The specified URL serves as a prefix for the path of all managed resources.

Optional:

- `authentication_method` (String) The type of authentication to use with this WebDAV server.

If this attribute is not specified, no authentication is attempted. Acceptable values are "basic" and "cert".

"basic" means that a username and a password must be provided and authentication will be performed using the HTTP Basic authentication scheme.

"cert" means that the connection to the WebDAV server is authenticated using mTLS (client certificate). With the "cert" authentication method, the private key must be specified inline using the "private_key" attribute or via a local file using the "private_key_path" attribute. The certificate associated to that private key must also be specified, either inline using the "certificate" attribute or as a local file using the "certificate_path" attribute.
- `ca_file` (String) A series of certificate authoritiy certificates to use to validate the certificate of the WebDAV server.

The content must be a list of PEM-encoded X.509 certificates.
- `ca_file_path` (String) A file containing a series of certificate authority certificates to use to validate the certificate of the WebDAV server.

This file content must be a list of PEM-encoded X.509 certificates, similar to the content of the /etc/ssl/certs/ca-certificates.crt file that can be found on some OSes.
- `certificate` (String) The certificate to use to authenticate using mTLS.
- `certificate_path` (String) The path to a local file containing the certificate to use to authenticate using mTLS.
- `password` (String, Sensitive, [Write-only](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments)) The password to use when authenticating with the HTTP Basic authentication scheme. This attribute is write-only, so it can be set with an ephemeral value that will not be stored in state.
- `private_key` (String, Sensitive, [Write-only](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments)) The private key to use when authenticating using mTLS. The key must be encoded with the PKCS#8 format. This attribute is write-only, so it can be set with an ephemeral value that will not be stored in state.
- `private_key_passphrase` (String, Sensitive, [Write-only](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments)) The passphrase used to encrypt the specified private key. This attribute is optional. If it is not specified, the private key is assumed to be stored unencrypted. This attribute is write-only, so it can be set with an ephemeral value that will not be stored in state.
- `private_key_path` (String) The path to a local file containing the private key to use when authenticating using mTLS.
- `username` (String) The username to use when authenticating with the HTTP Basic authentication scheme.
